<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>nestjs-grpc</title><meta name="description" content="Documentation for nestjs-grpc"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">nestjs-grpc</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>nestjs-grpc</h1></div><div class="tsd-panel tsd-typography"><a id="md:nestjs-grpc" class="tsd-anchor"></a><h1 class="tsd-anchor-link">nestjs-grpc<a href="#md:nestjs-grpc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><div align="center">
<p><a href="https://badge.fury.io/js/nestjs-grpc" target="_blank" class="external"><img src="https://badge.fury.io/js/nestjs-grpc.svg" alt="npm version"></a>
<a href="https://opensource.org/licenses/MIT" target="_blank" class="external"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://www.typescriptlang.org/" target="_blank" class="external"><img src="https://img.shields.io/badge/TypeScript-007ACC?logo=typescript&amp;logoColor=white" alt="TypeScript"></a>
<a href="https://nestjs.com/" target="_blank" class="external"><img src="https://img.shields.io/badge/NestJS-E0234E?logo=nestjs&amp;logoColor=white" alt="NestJS"></a></p>
<p><strong>Production-ready NestJS package for type-safe gRPC microservices with controller-based architecture</strong></p>
<p><a href="#md:-quick-start">Quick Start</a> • <a href="#md:-documentation">Documentation</a> • <a href="#md:-examples">Examples</a> • <a href="#md:-api-reference">API Reference</a></p>
</div>
<a id="md:✨-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">✨ Features<a href="#md:✨-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>🎯 <strong>Controller-Based Architecture</strong> - Familiar NestJS controller pattern for gRPC handlers</li>
<li>🛡️ <strong>Type Safety</strong> - Full TypeScript support with auto-generated types from proto files</li>
<li>🔄 <strong>Streaming Support</strong> - All gRPC streaming patterns (unary, server, client, bidirectional)</li>
<li>⚡ <strong>High Performance</strong> - Optimized for production with connection pooling and caching</li>
<li>🛠️ <strong>CLI Tools</strong> - Generate TypeScript definitions from proto files with <code>nestjs-grpc generate</code></li>
<li>🔒 <strong>Security</strong> - Built-in TLS support and flexible authentication options</li>
<li>📊 <strong>Advanced Logging</strong> - Configurable logging with multiple levels and performance metrics</li>
<li>🧪 <strong>Testing Friendly</strong> - Easy mocking and testing utilities for gRPC services</li>
<li>🏗️ <strong>Feature Modules</strong> - Advanced <code>forFeature()</code> support with full dependency injection</li>
<li>🔌 <strong>Complete DI Support</strong> - Inject any NestJS service into gRPC controllers and clients</li>
<li>🗃️ <strong>Database Integration</strong> - Seamless integration with TypeORM, Prisma, and other ORMs</li>
<li>⚙️ <strong>Configuration</strong> - Built-in support for NestJS Config module and environment variables</li>
<li>🔍 <strong>Error Handling</strong> - Comprehensive gRPC exception handling with proper status codes</li>
</ul>
<a id="md:🚀-quick-start" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🚀 Quick Start<a href="#md:🚀-quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:installation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span>
</code><button type="button">Copy</button></pre>

<a id="md:1-create-proto-file" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1. Create Proto File<a href="#md:1-create-proto-file" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="protobuf">// protos/auth.proto
syntax = "proto3";
package auth;

service AuthService {
  rpc Login(LoginRequest) returns (LoginResponse);
  rpc ValidateToken(ValidateTokenRequest) returns (ValidateTokenResponse);
  rpc StreamUsers(StreamUsersRequest) returns (stream User);
}

message LoginRequest {
  string email = 1;
  string password = 2;
}

message LoginResponse {
  string token = 1;
  User user = 2;
}

message ValidateTokenRequest {
  string token = 1;
}

message ValidateTokenResponse {
  bool valid = 1;
  User user = 2;
}

message StreamUsersRequest {
  int32 limit = 1;
}

message User {
  string id = 1;
  string email = 2;
  string name = 3;
}
</code><button type="button">Copy</button></pre>

<a id="md:2-generate-typescript-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2. Generate TypeScript Types<a href="#md:2-generate-typescript-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-3"># Generate types from proto files</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">-p</span><span class="hl-1"> </span><span class="hl-2">./protos</span><span class="hl-1"> </span><span class="hl-4">-o</span><span class="hl-1"> </span><span class="hl-2">./src/generated</span><br/><br/><span class="hl-3"># Or with options</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-5">\</span><br/><span class="hl-1">  </span><span class="hl-4">--proto</span><span class="hl-1"> </span><span class="hl-2">&quot;./protos/**/*.proto&quot;</span><span class="hl-1"> </span><span class="hl-5">\</span><br/><span class="hl-1">  </span><span class="hl-4">--output</span><span class="hl-1"> </span><span class="hl-2">&quot;./src/generated&quot;</span><span class="hl-1"> </span><span class="hl-5">\</span><br/><span class="hl-1">  </span><span class="hl-4">--classes</span><span class="hl-1"> </span><span class="hl-5">\</span><br/><span class="hl-1">  </span><span class="hl-4">--verbose</span>
</code><button type="button">Copy</button></pre>

<a id="md:3-set-up-grpc-module" class="tsd-anchor"></a><h3 class="tsd-anchor-link">3. Set Up gRPC Module<a href="#md:3-set-up-grpc-module" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// app.module.ts</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AuthController</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./auth.controller&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">UserService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./user.service&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">JwtService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/jwt&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/auth.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">AuthController</span><span class="hl-1">], </span><span class="hl-3">// ✅ gRPC Controller goes here</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">UserService</span><span class="hl-1">, </span><span class="hl-7">JwtService</span><span class="hl-1">], </span><span class="hl-3">// ✅ Services go here</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AppModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:4-create-grpc-controller" class="tsd-anchor"></a><h3 class="tsd-anchor-link">4. Create gRPC Controller<a href="#md:4-create-grpc-controller" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// auth.controller.ts</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Observable</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;rxjs&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcController</span><span class="hl-1">, </span><span class="hl-7">GrpcMethod</span><span class="hl-1">, </span><span class="hl-7">GrpcException</span><span class="hl-1">, </span><span class="hl-7">GrpcErrorCode</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">LoginRequest</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">LoginResponse</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">ValidateTokenRequest</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">ValidateTokenResponse</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">StreamUsersRequest</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">User</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./generated/auth&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Note: @GrpcController automatically applies @Injectable()</span><br/><span class="hl-3">// No need to add @Injectable() manually</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AuthController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">userService</span><span class="hl-1">: </span><span class="hl-8">UserService</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">jwtService</span><span class="hl-1">: </span><span class="hl-8">JwtService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;Login&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">LoginRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">LoginResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">validateUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">, </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">password</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">user</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">unauthenticated</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid credentials&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">token</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">jwtService</span><span class="hl-1">.</span><span class="hl-0">sign</span><span class="hl-1">({ </span><span class="hl-7">userId:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">token</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">name</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">        } </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-8">GrpcException</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">error</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">internal</span><span class="hl-1">(</span><span class="hl-2">&#39;Login failed&#39;</span><span class="hl-1">, { </span><span class="hl-7">error:</span><span class="hl-1"> </span><span class="hl-7">error</span><span class="hl-1">.</span><span class="hl-7">message</span><span class="hl-1"> });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;ValidateToken&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">ValidateTokenRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">ValidateTokenResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">payload</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">jwtService</span><span class="hl-1">.</span><span class="hl-0">verify</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">token</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">findById</span><span class="hl-1">(</span><span class="hl-7">payload</span><span class="hl-1">.</span><span class="hl-7">userId</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">valid:</span><span class="hl-1"> !!</span><span class="hl-7">user</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">user:</span><span class="hl-1"> </span><span class="hl-7">user</span><br/><span class="hl-1">                    ? {</span><br/><span class="hl-1">                          </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">                          </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">,</span><br/><span class="hl-1">                          </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">name</span><span class="hl-1">,</span><br/><span class="hl-1">                      }</span><br/><span class="hl-1">                    : </span><span class="hl-4">null</span><span class="hl-1">,</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">        } </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">valid:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">user:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> };</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;StreamUsers&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">streamUsers</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">StreamUsersRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">User</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Observable</span><span class="hl-1">(</span><span class="hl-7">observer</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><br/><span class="hl-1">                .</span><span class="hl-0">findAllPaginated</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">limit</span><span class="hl-1">)</span><br/><span class="hl-1">                .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-7">users</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">users</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-7">user</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">({</span><br/><span class="hl-1">                            </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">name</span><span class="hl-1">,</span><br/><span class="hl-1">                        });</span><br/><span class="hl-1">                    });</span><br/><span class="hl-1">                    </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">complete</span><span class="hl-1">();</span><br/><span class="hl-1">                })</span><br/><span class="hl-1">                .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">internal</span><span class="hl-1">(</span><span class="hl-2">&#39;Failed to stream users&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:5-create-grpc-client" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5. Create gRPC Client<a href="#md:5-create-grpc-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// auth-client.service.ts</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Injectable</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcClientService</span><span class="hl-1">, </span><span class="hl-7">InjectGrpcClient</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">LoginRequest</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">LoginResponse</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">ValidateTokenRequest</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">ValidateTokenResponse</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./generated/auth&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Injectable</span><span class="hl-1">()</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AuthClientService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">authClient</span><span class="hl-1">: </span><span class="hl-8">GrpcClientService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-7">email</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">password</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">LoginResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">&lt;</span><span class="hl-8">LoginRequest</span><span class="hl-1">, </span><span class="hl-8">LoginResponse</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Login&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">            </span><span class="hl-7">email</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">password</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">token</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">ValidateTokenResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">&lt;</span><span class="hl-8">ValidateTokenRequest</span><span class="hl-1">, </span><span class="hl-8">ValidateTokenResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;ValidateToken&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            { </span><span class="hl-7">token</span><span class="hl-1"> },</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:📖-documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">📖 Documentation<a href="#md:📖-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:cli-code-generation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">CLI Code Generation<a href="#md:cli-code-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>nestjs-grpc</code> CLI tool helps generate TypeScript definitions from your proto files.</p>
<a id="md:basic-usage" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Basic Usage<a href="#md:basic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="bash"><span class="hl-3"># Generate types with default settings</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><br/><br/><span class="hl-3"># Specify proto files and output directory</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">--proto</span><span class="hl-1"> </span><span class="hl-2">&quot;./protos/**/*.proto&quot;</span><span class="hl-1"> </span><span class="hl-4">--output</span><span class="hl-1"> </span><span class="hl-2">&quot;./src/generated&quot;</span><br/><br/><span class="hl-3"># Generate classes instead of interfaces</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">--classes</span><br/><br/><span class="hl-3"># Watch mode for development</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">--watch</span><br/><br/><span class="hl-3"># Verbose output for debugging</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">--verbose</span><br/><br/><span class="hl-3"># Filter by package name</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">--package-filter</span><span class="hl-1"> </span><span class="hl-2">&quot;auth&quot;</span>
</code><button type="button">Copy</button></pre>

<a id="md:cli-options" class="tsd-anchor"></a><h4 class="tsd-anchor-link">CLI Options<a href="#md:cli-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-p, --proto</code></td>
<td>Path to proto file, directory, or glob pattern</td>
<td><code>&quot;./protos/**/*.proto&quot;</code></td>
</tr>
<tr>
<td><code>-o, --output</code></td>
<td>Output directory for generated files</td>
<td><code>&quot;./src/generated&quot;</code></td>
</tr>
<tr>
<td><code>-w, --watch</code></td>
<td>Watch mode for file changes</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>-c, --classes</code></td>
<td>Generate classes instead of interfaces</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>--no-comments</code></td>
<td>Disable comments in generated files</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>--no-client-interfaces</code></td>
<td>Do not generate client interfaces</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>-f, --package-filter</code></td>
<td>Filter by package name</td>
<td>-</td>
</tr>
<tr>
<td><code>-r, --recursive</code></td>
<td>Recursively search directories</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>-v, --verbose</code></td>
<td>Enable verbose logging</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>-s, --silent</code></td>
<td>Disable all logging except errors</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<a id="md:generated-code-structure" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Generated Code Structure<a href="#md:generated-code-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Generated from auth.proto</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">LoginRequest</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">email</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">password</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">LoginResponse</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">token</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">user</span><span class="hl-1">?: </span><span class="hl-8">User</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">User</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">id</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">email</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// Service client interface (when --no-client-interfaces is not used)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">AuthServiceClient</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">LoginRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">LoginResponse</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">    </span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">ValidateTokenRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">ValidateTokenResponse</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">    </span><span class="hl-0">streamUsers</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">StreamUsersRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">User</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:module-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Module Configuration<a href="#md:module-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:basic-configuration" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Basic Configuration<a href="#md:basic-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AppModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:async-configuration-with-configservice" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Async Configuration with ConfigService<a href="#md:async-configuration-with-configservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">ConfigModule</span><span class="hl-1">, </span><span class="hl-7">ConfigService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/config&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">ConfigModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">(),</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRootAsync</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><span class="hl-7">ConfigModule</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-7">inject:</span><span class="hl-1"> [</span><span class="hl-7">ConfigService</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-0">useFactory</span><span class="hl-7">:</span><span class="hl-1"> (</span><span class="hl-7">configService</span><span class="hl-1">: </span><span class="hl-8">ConfigService</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">                </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_PROTO_PATH&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_PACKAGE&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_URL&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">secure:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_SECURE&#39;</span><span class="hl-1">, </span><span class="hl-4">false</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">maxSendMessageSize:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_MAX_SEND_SIZE&#39;</span><span class="hl-1">, </span><span class="hl-10">4</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">maxReceiveMessageSize:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_MAX_RECEIVE_SIZE&#39;</span><span class="hl-1">, </span><span class="hl-10">4</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;NODE_ENV&#39;</span><span class="hl-1">) === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1"> ? </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-7">configService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_LOG_PERFORMANCE&#39;</span><span class="hl-1">, </span><span class="hl-4">false</span><span class="hl-1">),</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            }),</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AppModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:tlsssl-configuration" class="tsd-anchor"></a><h4 class="tsd-anchor-link">TLS/SSL Configuration<a href="#md:tlsssl-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">readFileSync</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;fs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;secure.example.com:443&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">secure:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">rootCerts:</span><span class="hl-1"> </span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-2">&#39;./certs/ca-cert.pem&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-7">privateKey:</span><span class="hl-1"> </span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-2">&#39;./certs/client-key.pem&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-7">certChain:</span><span class="hl-1"> </span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-2">&#39;./certs/client-cert.pem&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:feature-modules-and-service-registration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Feature Modules and Service Registration<a href="#md:feature-modules-and-service-registration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Feature modules allow you to register external gRPC services that your module needs to call. Use <code>GrpcModule.forRoot()</code> to register controllers (service providers) and <code>GrpcModule.forFeature()</code> to register service clients (service consumers).</p>
<a id="md:basic-feature-module" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Basic Feature Module<a href="#md:basic-feature-module" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">UserController</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./user.controller&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">UserService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./user.service&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">UserController</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">UserService</span><span class="hl-1">],</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">UserService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UserModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:auth-service-service-provider" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Auth Service (Service Provider)<a href="#md:auth-service-service-provider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// auth.module.ts - Service that provides gRPC controllers</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AuthController</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./auth.controller&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AuthService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./auth.service&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">join</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;path&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-3">// Register this service&#39;s own gRPC server with controllers</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/auth.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;0.0.0.0:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">enabled:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1"> ? </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">context:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logDetails:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">AuthController</span><span class="hl-1">], </span><span class="hl-3">// gRPC controllers go here</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">AuthService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">AuthService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AuthModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// auth.controller.ts - Handles incoming gRPC requests</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AuthController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">authService</span><span class="hl-1">: </span><span class="hl-8">AuthService</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;ValidateToken&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">ValidateTokenRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">ValidateTokenResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">isValid</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authService</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">token</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-7">isValid</span><span class="hl-1"> ? </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authService</span><span class="hl-1">.</span><span class="hl-0">getUserFromToken</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">token</span><span class="hl-1">) : </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">valid:</span><span class="hl-1"> </span><span class="hl-7">isValid</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">user</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:post-service-service-consumer" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Post Service (Service Consumer)<a href="#md:post-service-service-consumer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// post.module.ts - Service that consumes other gRPC services</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">PostController</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./post.controller&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">PostService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./post.service&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcAuthService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./grpc-auth.service&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">join</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;path&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-3">// Register this service&#39;s own gRPC server</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/post.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;post&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;0.0.0.0:50052&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">enabled:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1"> ? </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">context:</span><span class="hl-1"> </span><span class="hl-2">&#39;PostService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logDetails:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        }),</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Register external services this module needs to call</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">serviceRegistrations:</span><span class="hl-1"> [</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/auth.proto&#39;</span><span class="hl-1">), </span><span class="hl-3">// Same proto file!</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;auth-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">timeout:</span><span class="hl-1"> </span><span class="hl-10">10000</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-7">maxRetries:</span><span class="hl-1"> </span><span class="hl-10">3</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-7">retryDelay:</span><span class="hl-1"> </span><span class="hl-10">1000</span><span class="hl-1">,</span><br/><span class="hl-1">                    },</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/user.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">USER_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;user-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><br/><span class="hl-1">            </span><span class="hl-3">// Custom service providers that use the registered services</span><br/><span class="hl-1">            </span><span class="hl-7">services:</span><span class="hl-1"> [</span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">PostController</span><span class="hl-1">], </span><span class="hl-3">// This service&#39;s own controllers</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">, </span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">, </span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">PostModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// grpc-auth.service.ts - Uses the registered AuthService</span><br/><span class="hl-1">@</span><span class="hl-0">Injectable</span><span class="hl-1">()</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">GrpcAuthService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(@</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">) </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">authClient</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">token</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">boolean</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">result</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">({ </span><span class="hl-7">token</span><span class="hl-1"> });</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">valid</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Token validation failed:&#39;</span><span class="hl-1">, </span><span class="hl-7">error</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// post.controller.ts - This service&#39;s gRPC controller</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;PostService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">PostController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">postService</span><span class="hl-1">: </span><span class="hl-8">PostService</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">grpcAuthService</span><span class="hl-1">: </span><span class="hl-8">GrpcAuthService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;CreatePost&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">createPost</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">CreatePostRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">CreatePostResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-3">// Validate token using the registered AuthService</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">isValid</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">grpcAuthService</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">token</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">isValid</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">unauthenticated</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid token&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">post</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">postService</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">post</span><span class="hl-1"> };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:production-configuration-example" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Production Configuration Example<a href="#md:production-configuration-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// post.module.ts</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">ConfigModule</span><span class="hl-1">, </span><span class="hl-7">ConfigService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/config&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">PostController</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./post.controller&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">PostService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./post.service&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">join</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;path&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">ConfigModule</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-3">// Configure this service&#39;s own gRPC server</span><br/><span class="hl-1">            </span><span class="hl-7">localService:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/post.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;post&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">GRPC_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;0.0.0.0:50052&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">enabled:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1"> ? </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">context:</span><span class="hl-1"> </span><span class="hl-2">&#39;PostService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logDetails:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            },</span><br/><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">PostController</span><span class="hl-1">],</span><br/><br/><span class="hl-1">            </span><span class="hl-3">// External services this module calls</span><br/><span class="hl-1">            </span><span class="hl-7">externalServices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/auth.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;auth-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">USER_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;user-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><br/><span class="hl-1">            </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">],</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">PostModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:complete-microservices-example" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Complete Microservices Example<a href="#md:complete-microservices-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// app.module.ts - Main application module</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">ConfigModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/config&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">ConfigModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({ </span><span class="hl-7">isGlobal:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1"> }),</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Configure the main gRPC module (this service&#39;s own proto)</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/post.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;post&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        }),</span><br/><br/><span class="hl-1">        </span><span class="hl-7">PostModule</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">UserModule</span><span class="hl-1">,</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AppModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// post.module.ts - Feature module with external service dependencies</span><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">TypeOrmModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">([</span><span class="hl-7">PostEntity</span><span class="hl-1">]),</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">PostController</span><span class="hl-1">], </span><span class="hl-3">// Handles PostService gRPC calls</span><br/><br/><span class="hl-1">            </span><span class="hl-7">externalServices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                </span><span class="hl-3">// Register external services this module depends on</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/auth.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;auth-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">USER_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;user-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;NotificationService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;notification&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/notification.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NOTIFICATION_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;notification-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">secure:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-7">timeout:</span><span class="hl-1"> </span><span class="hl-10">5000</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-7">maxRetries:</span><span class="hl-1"> </span><span class="hl-10">2</span><span class="hl-1">,</span><br/><span class="hl-1">                    },</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><br/><span class="hl-1">            </span><span class="hl-7">services:</span><span class="hl-1"> [</span><span class="hl-7">PostClientService</span><span class="hl-1">], </span><span class="hl-3">// Custom client service</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">PostService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">PostModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// post.controller.ts - gRPC Controller (handles incoming requests)</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;PostService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">PostController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">postService</span><span class="hl-1">: </span><span class="hl-8">PostService</span><span class="hl-1">,</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">) </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">authClient</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">,</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">) </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">userClient</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">,</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;NotificationService&#39;</span><span class="hl-1">) </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">notificationClient</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;CreatePost&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">createPost</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">CreatePostRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">CreatePostResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-3">// Validate token with auth service</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">authResult</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">token:</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">token</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">authResult</span><span class="hl-1">.</span><span class="hl-7">valid</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">unauthenticated</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid token&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Get user details</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">getUserById</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-7">authResult</span><span class="hl-1">.</span><span class="hl-7">userId</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Create the post</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">post</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">postService</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">title:</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">title</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">content:</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">content</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">authorId:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Send notification (fire and forget)</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">notificationClient</span><br/><span class="hl-1">            .</span><span class="hl-0">sendNotification</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-7">userId:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;POST_CREATED&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">message:</span><span class="hl-1"> </span><span class="hl-2">`Your post &quot;</span><span class="hl-4">${</span><span class="hl-7">post</span><span class="hl-11">.</span><span class="hl-7">title</span><span class="hl-4">}</span><span class="hl-2">&quot; has been created`</span><span class="hl-1">,</span><br/><span class="hl-1">            })</span><br/><span class="hl-1">            .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Failed to send notification:&#39;</span><span class="hl-1">, </span><span class="hl-7">error</span><span class="hl-1">);</span><br/><span class="hl-1">            });</span><br/><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">post</span><span class="hl-1"> };</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;GetPost&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getPost</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">GetPostRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">GetPostResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">post</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">postService</span><span class="hl-1">.</span><span class="hl-0">findById</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">post</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">notFound</span><span class="hl-1">(</span><span class="hl-2">&#39;Post not found&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Get author details from user service</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">author</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">getUserById</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-7">post</span><span class="hl-1">.</span><span class="hl-7">authorId</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">post:</span><span class="hl-1"> {</span><br/><span class="hl-1">                ...</span><span class="hl-7">post</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">author</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// grpc-auth.service.ts - Custom client service wrapper</span><br/><span class="hl-1">@</span><span class="hl-0">Injectable</span><span class="hl-1">()</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">GrpcAuthService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(@</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">) </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">authClient</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">token</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">boolean</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">result</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">({ </span><span class="hl-7">token</span><span class="hl-1"> });</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">valid</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Token validation failed:&#39;</span><span class="hl-1">, </span><span class="hl-7">error</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getUserFromToken</span><span class="hl-1">(</span><span class="hl-7">token</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">any</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">result</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">({ </span><span class="hl-7">token</span><span class="hl-1"> });</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">valid</span><span class="hl-1"> ? </span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">user</span><span class="hl-1"> : </span><span class="hl-4">null</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:environment-based-service-configuration" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Environment-Based Service Configuration<a href="#md:environment-based-service-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// config/grpc.config.ts</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">grpcConfig</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">    </span><span class="hl-7">externalServices:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">            </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/auth.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;auth-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">secure:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_SECURE</span><span class="hl-1"> === </span><span class="hl-2">&#39;true&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">timeout:</span><span class="hl-1"> </span><span class="hl-0">parseInt</span><span class="hl-1">(</span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_TIMEOUT</span><span class="hl-1"> || </span><span class="hl-2">&#39;10000&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">maxRetries:</span><span class="hl-1"> </span><span class="hl-0">parseInt</span><span class="hl-1">(</span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_MAX_RETRIES</span><span class="hl-1"> || </span><span class="hl-2">&#39;3&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">            </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">USER_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;user-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// feature.module.ts</span><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">ConfigModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">(</span><span class="hl-7">grpcConfig</span><span class="hl-1">),</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">FeatureController</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-7">externalServices:</span><span class="hl-1"> </span><span class="hl-0">grpcConfig</span><span class="hl-1">().</span><span class="hl-7">externalServices</span><span class="hl-1">,</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">FeatureModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:🔄-streaming-examples" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🔄 Streaming Examples<a href="#md:🔄-streaming-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:server-streaming" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Server Streaming<a href="#md:server-streaming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;DataService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">DataController</span><span class="hl-1"> {</span><br/><span class="hl-1">    @</span><span class="hl-0">GrpcStream</span><span class="hl-1">(</span><span class="hl-2">&#39;StreamData&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">streamData</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">StreamDataRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">DataChunk</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Observable</span><span class="hl-1">(</span><span class="hl-7">observer</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">chunks</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">generateDataChunks</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">size</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-7">index</span><span class="hl-1"> = </span><span class="hl-10">0</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">interval</span><span class="hl-1"> = </span><span class="hl-0">setInterval</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">index</span><span class="hl-1"> &lt; </span><span class="hl-7">chunks</span><span class="hl-1">.</span><span class="hl-7">length</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-7">chunks</span><span class="hl-1">[</span><span class="hl-7">index</span><span class="hl-1">]);</span><br/><span class="hl-1">                    </span><span class="hl-7">index</span><span class="hl-1">++;</span><br/><span class="hl-1">                } </span><span class="hl-6">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">complete</span><span class="hl-1">();</span><br/><span class="hl-1">                    </span><span class="hl-0">clearInterval</span><span class="hl-1">(</span><span class="hl-7">interval</span><span class="hl-1">);</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            }, </span><span class="hl-10">100</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-3">// Cleanup on unsubscribe</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">clearInterval</span><span class="hl-1">(</span><span class="hl-7">interval</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:client-streaming" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Client Streaming<a href="#md:client-streaming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">@</span><span class="hl-0">Injectable</span><span class="hl-1">()</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UploadClientService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;UploadService&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">uploadClient</span><span class="hl-1">: </span><span class="hl-8">GrpcClientService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">uploadFile</span><span class="hl-1">(</span><span class="hl-7">filePath</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">UploadResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">fileStream</span><span class="hl-1"> = </span><span class="hl-0">createReadStream</span><span class="hl-1">(</span><span class="hl-7">filePath</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">chunks</span><span class="hl-1">: </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">FileChunk</span><span class="hl-1">&gt; = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Observable</span><span class="hl-1">(</span><span class="hl-7">observer</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">fileStream</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-7">chunk</span><span class="hl-1">: </span><span class="hl-8">Buffer</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">({ </span><span class="hl-7">data:</span><span class="hl-1"> </span><span class="hl-7">chunk</span><span class="hl-1">, </span><span class="hl-7">filename:</span><span class="hl-1"> </span><span class="hl-0">basename</span><span class="hl-1">(</span><span class="hl-7">filePath</span><span class="hl-1">) });</span><br/><span class="hl-1">            });</span><br/><br/><span class="hl-1">            </span><span class="hl-7">fileStream</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">complete</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-7">fileStream</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">, </span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-7">error</span><span class="hl-1">));</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">uploadClient</span><span class="hl-1">.</span><span class="hl-0">clientStream</span><span class="hl-1">&lt;</span><span class="hl-8">FileChunk</span><span class="hl-1">, </span><span class="hl-8">UploadResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;UploadService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;UploadFile&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">chunks</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:bidirectional-streaming" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Bidirectional Streaming<a href="#md:bidirectional-streaming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;ChatService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">ChatController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">activeConnections</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">&lt;</span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-8">Observer</span><span class="hl-1">&lt;</span><span class="hl-8">ChatMessage</span><span class="hl-1">&gt;&gt;();</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcStream</span><span class="hl-1">(</span><span class="hl-2">&#39;Chat&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">chat</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">ChatMessage</span><span class="hl-1">&gt;): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">ChatMessage</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Observable</span><span class="hl-1">(</span><span class="hl-7">observer</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">connectionId</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">generateConnectionId</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">activeConnections</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-7">connectionId</span><span class="hl-1">, </span><span class="hl-7">observer</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-0">subscribe</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-0">next</span><span class="hl-7">:</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-3">// Broadcast message to all connected clients</span><br/><span class="hl-1">                    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">broadcastMessage</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">, </span><span class="hl-7">connectionId</span><span class="hl-1">);</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-0">complete</span><span class="hl-7">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">activeConnections</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-7">connectionId</span><span class="hl-1">);</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                </span><span class="hl-0">error</span><span class="hl-7">:</span><span class="hl-1"> </span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Chat error:&#39;</span><span class="hl-1">, </span><span class="hl-7">error</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">activeConnections</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-7">connectionId</span><span class="hl-1">);</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            });</span><br/><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">activeConnections</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-7">connectionId</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">broadcastMessage</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">: </span><span class="hl-8">ChatMessage</span><span class="hl-1">, </span><span class="hl-7">senderConnectionId</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">activeConnections</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-7">observer</span><span class="hl-1">, </span><span class="hl-7">connectionId</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">connectionId</span><span class="hl-1"> !== </span><span class="hl-7">senderConnectionId</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:🛡️-error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🛡️ Error Handling<a href="#md:🛡️-error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:using-grpcexception" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Using GrpcException<a href="#md:using-grpcexception" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcException</span><span class="hl-1">, </span><span class="hl-7">GrpcErrorCode</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UserController</span><span class="hl-1"> {</span><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;GetUser&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">GetUserRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">GetUserResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">findById</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">user</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">// Standard gRPC exception with proper status code</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">notFound</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-2">&#39;User not found&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                { </span><span class="hl-7">userId:</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1"> },</span><br/><span class="hl-1">                { </span><span class="hl-2">&#39;x-correlation-id&#39;</span><span class="hl-7">:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">generateCorrelationId</span><span class="hl-1">() },</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">hasPermission</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">requesterId</span><span class="hl-1">, </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">permissionDenied</span><span class="hl-1">(</span><span class="hl-2">&#39;Access denied to user resource&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">user</span><span class="hl-1"> };</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;CreateUser&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">createUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">CreateUserRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">CreateUserResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">validateEmail</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">)) {</span><br/><span class="hl-1">                </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">invalidArgument</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid email format&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">                    </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">,</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">existingUser</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">findByEmail</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">existingUser</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">alreadyExists</span><span class="hl-1">(</span><span class="hl-2">&#39;User with this email already exists&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">user</span><span class="hl-1"> };</span><br/><span class="hl-1">        } </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-8">GrpcException</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">error</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-3">// Convert unknown errors to internal gRPC errors</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">internal</span><span class="hl-1">(</span><span class="hl-2">&#39;User creation failed&#39;</span><span class="hl-1">, { </span><span class="hl-7">error:</span><span class="hl-1"> </span><span class="hl-7">error</span><span class="hl-1">.</span><span class="hl-7">message</span><span class="hl-1"> });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:🧪-testing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🧪 Testing<a href="#md:🧪-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:testing-grpc-controllers" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Testing gRPC Controllers<a href="#md:testing-grpc-controllers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Test</span><span class="hl-1">, </span><span class="hl-7">TestingModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/testing&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AuthController</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./auth.controller&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">UserService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./user.service&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">JwtService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/jwt&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthController&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-7">controller</span><span class="hl-1">: </span><span class="hl-8">AuthController</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-7">userService</span><span class="hl-1">: </span><span class="hl-8">UserService</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">beforeEach</span><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">module</span><span class="hl-1">: </span><span class="hl-8">TestingModule</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">Test</span><span class="hl-1">.</span><span class="hl-0">createTestingModule</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">                </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./test/protos/auth.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                }),</span><br/><span class="hl-1">            ],</span><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">AuthController</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">provide:</span><span class="hl-1"> </span><span class="hl-7">UserService</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">useValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">validateUser:</span><span class="hl-1"> </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">fn</span><span class="hl-1">(),</span><br/><span class="hl-1">                        </span><span class="hl-7">findById:</span><span class="hl-1"> </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">fn</span><span class="hl-1">(),</span><br/><span class="hl-1">                    },</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">provide:</span><span class="hl-1"> </span><span class="hl-7">JwtService</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">useValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">sign:</span><span class="hl-1"> </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">fn</span><span class="hl-1">(),</span><br/><span class="hl-1">                        </span><span class="hl-7">verify:</span><span class="hl-1"> </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">fn</span><span class="hl-1">(),</span><br/><span class="hl-1">                    },</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><span class="hl-1">        }).</span><span class="hl-0">compile</span><span class="hl-1">();</span><br/><br/><span class="hl-1">        </span><span class="hl-7">controller</span><span class="hl-1"> = </span><span class="hl-8">module</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">&lt;</span><span class="hl-8">AuthController</span><span class="hl-1">&gt;(</span><span class="hl-7">AuthController</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-7">userService</span><span class="hl-1"> = </span><span class="hl-8">module</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">&lt;</span><span class="hl-8">UserService</span><span class="hl-1">&gt;(</span><span class="hl-7">UserService</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;login&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">it</span><span class="hl-1">(</span><span class="hl-2">&#39;should return token and user on successful login&#39;</span><span class="hl-1">, </span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">mockUser</span><span class="hl-1"> = { </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;test@example.com&#39;</span><span class="hl-1">, </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;Test User&#39;</span><span class="hl-1"> };</span><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">mockToken</span><span class="hl-1"> = </span><span class="hl-2">&#39;jwt-token&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">            </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">spyOn</span><span class="hl-1">(</span><span class="hl-7">userService</span><span class="hl-1">, </span><span class="hl-2">&#39;validateUser&#39;</span><span class="hl-1">).</span><span class="hl-0">mockResolvedValue</span><span class="hl-1">(</span><span class="hl-7">mockUser</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">spyOn</span><span class="hl-1">(</span><span class="hl-7">controller</span><span class="hl-1">[</span><span class="hl-2">&#39;jwtService&#39;</span><span class="hl-1">], </span><span class="hl-2">&#39;sign&#39;</span><span class="hl-1">).</span><span class="hl-0">mockReturnValue</span><span class="hl-1">(</span><span class="hl-7">mockToken</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">result</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">controller</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;test@example.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;password&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            });</span><br/><br/><span class="hl-1">            </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-7">result</span><span class="hl-1">).</span><span class="hl-0">toEqual</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-7">token:</span><span class="hl-1"> </span><span class="hl-7">mockToken</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">user:</span><span class="hl-1"> </span><span class="hl-7">mockUser</span><span class="hl-1">,</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-0">it</span><span class="hl-1">(</span><span class="hl-2">&#39;should throw unauthenticated error for invalid credentials&#39;</span><span class="hl-1">, </span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">spyOn</span><span class="hl-1">(</span><span class="hl-7">userService</span><span class="hl-1">, </span><span class="hl-2">&#39;validateUser&#39;</span><span class="hl-1">).</span><span class="hl-0">mockResolvedValue</span><span class="hl-1">(</span><span class="hl-4">null</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">expect</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-7">controller</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">({</span><br/><span class="hl-1">                    </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;invalid@example.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;wrong&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                }),</span><br/><span class="hl-1">            ).</span><span class="hl-7">rejects</span><span class="hl-1">.</span><span class="hl-0">toThrow</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid credentials&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:testing-grpc-clients" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Testing gRPC Clients<a href="#md:testing-grpc-clients" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Test</span><span class="hl-1">, </span><span class="hl-7">TestingModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/testing&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcClientService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AuthClientService</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./auth-client.service&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthClientService&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-7">service</span><span class="hl-1">: </span><span class="hl-8">AuthClientService</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-7">grpcClient</span><span class="hl-1">: </span><span class="hl-8">GrpcClientService</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">beforeEach</span><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">mockGrpcClient</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-7">call:</span><span class="hl-1"> </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">fn</span><span class="hl-1">(),</span><br/><span class="hl-1">            </span><span class="hl-7">stream:</span><span class="hl-1"> </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">fn</span><span class="hl-1">(),</span><br/><span class="hl-1">        };</span><br/><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">module</span><span class="hl-1">: </span><span class="hl-8">TestingModule</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">Test</span><span class="hl-1">.</span><span class="hl-0">createTestingModule</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><br/><span class="hl-1">                </span><span class="hl-7">AuthClientService</span><span class="hl-1">,</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">provide:</span><span class="hl-1"> </span><span class="hl-2">&#39;GRPC_CLIENT_AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">useValue:</span><span class="hl-1"> </span><span class="hl-7">mockGrpcClient</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><span class="hl-1">        }).</span><span class="hl-0">compile</span><span class="hl-1">();</span><br/><br/><span class="hl-1">        </span><span class="hl-7">service</span><span class="hl-1"> = </span><span class="hl-8">module</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">&lt;</span><span class="hl-8">AuthClientService</span><span class="hl-1">&gt;(</span><span class="hl-7">AuthClientService</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-7">grpcClient</span><span class="hl-1"> = </span><span class="hl-8">module</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">&lt;</span><span class="hl-8">GrpcClientService</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;GRPC_CLIENT_AuthService&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-0">it</span><span class="hl-1">(</span><span class="hl-2">&#39;should call login method with correct parameters&#39;</span><span class="hl-1">, </span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">mockResponse</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-7">token:</span><span class="hl-1"> </span><span class="hl-2">&#39;jwt-token&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">user:</span><span class="hl-1"> { </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;test@example.com&#39;</span><span class="hl-1">, </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;Test User&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">        };</span><br/><br/><span class="hl-1">        </span><span class="hl-7">jest</span><span class="hl-1">.</span><span class="hl-0">spyOn</span><span class="hl-1">(</span><span class="hl-7">grpcClient</span><span class="hl-1">, </span><span class="hl-2">&#39;call&#39;</span><span class="hl-1">).</span><span class="hl-0">mockResolvedValue</span><span class="hl-1">(</span><span class="hl-7">mockResponse</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">result</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">service</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-2">&#39;test@example.com&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;password&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-7">grpcClient</span><span class="hl-1">.</span><span class="hl-7">call</span><span class="hl-1">).</span><span class="hl-0">toHaveBeenCalledWith</span><span class="hl-1">(</span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Login&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">            </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;test@example.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;password&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-7">result</span><span class="hl-1">).</span><span class="hl-0">toEqual</span><span class="hl-1">(</span><span class="hl-7">mockResponse</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:🏗️-microservices-architecture-examples" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🏗️ Microservices Architecture Examples<a href="#md:🏗️-microservices-architecture-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:api-gateway-with-grpc-backends" class="tsd-anchor"></a><h3 class="tsd-anchor-link">API Gateway with gRPC Backends<a href="#md:api-gateway-with-grpc-backends" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// api-gateway/src/app.module.ts</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">Module</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/common&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;nestjs-grpc&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">UserModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./user/user.module&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">OrderModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./order/order.module&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AuthModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./auth/auth.module&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-3">// Main gRPC module configuration</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRootAsync</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-0">useFactory</span><span class="hl-7">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">                </span><span class="hl-7">protoPath:</span><span class="hl-1"> [</span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;./protos/order.proto&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;./protos/auth.proto&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">                </span><span class="hl-7">package:</span><span class="hl-1"> [</span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;order&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">                </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">GRPC_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1"> ? </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            }),</span><br/><span class="hl-1">        }),</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Feature modules</span><br/><span class="hl-1">        </span><span class="hl-7">UserModule</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">OrderModule</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">AuthModule</span><span class="hl-1">,</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AppModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// user/user.module.ts</span><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">services:</span><span class="hl-1"> [</span><span class="hl-7">UserClientService</span><span class="hl-1">, </span><span class="hl-7">AuthClientService</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">UserController</span><span class="hl-1">],</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">UserService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">UserService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UserModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// user/user.controller.ts (HTTP REST API)</span><br/><span class="hl-1">@</span><span class="hl-0">Controller</span><span class="hl-1">(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UserController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">userClient</span><span class="hl-1">: </span><span class="hl-8">UserClientService</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">authClient</span><span class="hl-1">: </span><span class="hl-8">AuthClientService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">Get</span><span class="hl-1">(</span><span class="hl-2">&#39;:id&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getUser</span><span class="hl-1">(@</span><span class="hl-0">Param</span><span class="hl-1">(</span><span class="hl-2">&#39;id&#39;</span><span class="hl-1">) </span><span class="hl-7">id</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, @</span><span class="hl-0">Headers</span><span class="hl-1">(</span><span class="hl-2">&#39;authorization&#39;</span><span class="hl-1">) </span><span class="hl-7">token</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">// Validate token via gRPC</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">validation</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">authClient</span><span class="hl-1">.</span><span class="hl-0">validateToken</span><span class="hl-1">(</span><span class="hl-7">token</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">validation</span><span class="hl-1">.</span><span class="hl-7">valid</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">UnauthorizedException</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid token&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-3">// Get user via gRPC</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">getUser</span><span class="hl-1">({ </span><span class="hl-7">id</span><span class="hl-1"> });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">Post</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">createUser</span><span class="hl-1">(@</span><span class="hl-0">Body</span><span class="hl-1">() </span><span class="hl-7">createUserDto</span><span class="hl-1">: </span><span class="hl-8">CreateUserDto</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">createUser</span><span class="hl-1">(</span><span class="hl-7">createUserDto</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// user/user-client.service.ts</span><br/><span class="hl-1">@</span><span class="hl-0">Injectable</span><span class="hl-1">()</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UserClientService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">userClient</span><span class="hl-1">: </span><span class="hl-8">GrpcClientService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">GetUserRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">GetUserResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">&lt;</span><span class="hl-8">GetUserRequest</span><span class="hl-1">, </span><span class="hl-8">GetUserResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;GetUser&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">request</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-7">timeout:</span><span class="hl-1"> </span><span class="hl-10">5000</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">retry:</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">maxAttempts:</span><span class="hl-1"> </span><span class="hl-10">3</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">delayMs:</span><span class="hl-1"> </span><span class="hl-10">1000</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">createUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">CreateUserRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">CreateUserResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">&lt;</span><span class="hl-8">CreateUserRequest</span><span class="hl-1">, </span><span class="hl-8">CreateUserResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;CreateUser&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">request</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">streamUsers</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">StreamUsersRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">User</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">serverStream</span><span class="hl-1">&lt;</span><span class="hl-8">StreamUsersRequest</span><span class="hl-1">, </span><span class="hl-8">User</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;StreamUsers&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">request</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:microservice-implementation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Microservice Implementation<a href="#md:microservice-implementation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// user-service/src/main.ts</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">NestFactory</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">GrpcOptions</span><span class="hl-1">, </span><span class="hl-7">Transport</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@nestjs/microservices&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">AppModule</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./app.module&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-0">bootstrap</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">app</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">NestFactory</span><span class="hl-1">.</span><span class="hl-0">createMicroservice</span><span class="hl-1">&lt;</span><span class="hl-8">GrpcOptions</span><span class="hl-1">&gt;(</span><span class="hl-7">AppModule</span><span class="hl-1">, {</span><br/><span class="hl-1">        </span><span class="hl-7">transport:</span><span class="hl-1"> </span><span class="hl-7">Transport</span><span class="hl-1">.</span><span class="hl-9">GRPC</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">app</span><span class="hl-1">.</span><span class="hl-0">listen</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;User microservice is listening on localhost:50051&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-0">bootstrap</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// user-service/src/app.module.ts</span><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">ConfigModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">(),</span><br/><span class="hl-1">        </span><span class="hl-7">TypeOrmModule</span><span class="hl-1">.</span><span class="hl-0">forRootAsync</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-0">useFactory</span><span class="hl-7">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">                </span><span class="hl-7">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;postgresql&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">host:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">DB_HOST</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">port:</span><span class="hl-1"> </span><span class="hl-0">parseInt</span><span class="hl-1">(</span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">DB_PORT</span><span class="hl-1">),</span><br/><span class="hl-1">                </span><span class="hl-7">username:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">DB_USERNAME</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">password:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">DB_PASSWORD</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">database:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">DB_NAME</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-7">entities:</span><span class="hl-1"> [</span><span class="hl-7">UserEntity</span><span class="hl-1">],</span><br/><span class="hl-1">                </span><span class="hl-7">synchronize:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">NODE_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            }),</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">UserController</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">UserService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">AppModule</span><span class="hl-1"> {}</span><br/><br/><span class="hl-3">// user-service/src/user.controller.ts</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">)</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">UserController</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">userService</span><span class="hl-1">: </span><span class="hl-8">UserService</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;GetUser&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">GetUserRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">GetUserResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">findById</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-7">user</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">notFound</span><span class="hl-1">(</span><span class="hl-2">&#39;User not found&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">user:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">toGrpcUser</span><span class="hl-1">(</span><span class="hl-7">user</span><span class="hl-1">) };</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-2">&#39;CreateUser&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">createUser</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">CreateUserRequest</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">CreateUserResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> { </span><span class="hl-7">user:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">toGrpcUser</span><span class="hl-1">(</span><span class="hl-7">user</span><span class="hl-1">) };</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    @</span><span class="hl-0">GrpcStream</span><span class="hl-1">(</span><span class="hl-2">&#39;StreamUsers&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">streamUsers</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">StreamUsersRequest</span><span class="hl-1">): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">User</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Observable</span><span class="hl-1">(</span><span class="hl-7">observer</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userService</span><br/><span class="hl-1">                .</span><span class="hl-0">findAllPaginated</span><span class="hl-1">(</span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">limit</span><span class="hl-1">, </span><span class="hl-7">request</span><span class="hl-1">.</span><span class="hl-7">offset</span><span class="hl-1">)</span><br/><span class="hl-1">                .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-7">users</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">users</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-7">user</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">toGrpcUser</span><span class="hl-1">(</span><span class="hl-7">user</span><span class="hl-1">));</span><br/><span class="hl-1">                    });</span><br/><span class="hl-1">                    </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">complete</span><span class="hl-1">();</span><br/><span class="hl-1">                })</span><br/><span class="hl-1">                .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-7">error</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">observer</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-7">GrpcException</span><span class="hl-1">.</span><span class="hl-0">internal</span><span class="hl-1">(</span><span class="hl-2">&#39;Failed to stream users&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-0">toGrpcUser</span><span class="hl-1">(</span><span class="hl-7">user</span><span class="hl-1">: </span><span class="hl-8">UserEntity</span><span class="hl-1">): </span><span class="hl-8">User</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">id:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">id</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">email:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">email</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">name</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">createdAt:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">createdAt</span><span class="hl-1">.</span><span class="hl-0">toISOString</span><span class="hl-1">(),</span><br/><span class="hl-1">            </span><span class="hl-7">updatedAt:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">.</span><span class="hl-7">updatedAt</span><span class="hl-1">.</span><span class="hl-0">toISOString</span><span class="hl-1">(),</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:📊-logging-configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">📊 Logging Configuration<a href="#md:📊-logging-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:basic-logging-setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Basic Logging Setup<a href="#md:basic-logging-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1">, </span><span class="hl-3">// debug, verbose, log, warn, error</span><br/><span class="hl-1">        </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-3">// Log all errors</span><br/><span class="hl-1">        </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-3">// Log performance metrics</span><br/><span class="hl-1">        </span><span class="hl-7">logDetails:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-3">// Log request/response details</span><br/><span class="hl-1">        </span><span class="hl-7">context:</span><span class="hl-1"> </span><span class="hl-2">&#39;MyGrpcService&#39;</span><span class="hl-1">, </span><span class="hl-3">// Custom context for logs</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:environment-based-logging" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Environment-Based Logging<a href="#md:environment-based-logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRootAsync</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">inject:</span><span class="hl-1"> [</span><span class="hl-7">ConfigService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-0">useFactory</span><span class="hl-7">:</span><span class="hl-1"> (</span><span class="hl-7">config</span><span class="hl-1">: </span><span class="hl-8">ConfigService</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">        </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_PROTO_PATH&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">        </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_PACKAGE&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">        </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_URL&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">        </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;NODE_ENV&#39;</span><span class="hl-1">) === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1"> ? </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;GRPC_LOG_PERFORMANCE&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;false&#39;</span><span class="hl-1">) === </span><span class="hl-2">&#39;true&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">logDetails:</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;NODE_ENV&#39;</span><span class="hl-1">) === </span><span class="hl-2">&#39;development&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    }),</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:sample-log-output" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Sample Log Output<a href="#md:sample-log-output" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When debug logging is enabled, you'll see detailed information:</p>
<pre><code><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">     </span><span class="hl-9">LOG</span><span class="hl-1"> [</span><span class="hl-7">ProtoLoader</span><span class="hl-1">] </span><span class="hl-7">Loading</span><span class="hl-1"> </span><span class="hl-7">proto</span><span class="hl-1"> </span><span class="hl-7">files</span><span class="hl-1"> </span><span class="hl-12">from</span><span class="hl-1">: ./</span><span class="hl-7">protos</span><span class="hl-1">/</span><span class="hl-7">auth</span><span class="hl-1">.</span><span class="hl-7">proto</span><br/><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">   </span><span class="hl-9">DEBUG</span><span class="hl-1"> [</span><span class="hl-7">ProtoLoader</span><span class="hl-1">] </span><span class="hl-7">Loaded</span><span class="hl-1"> </span><span class="hl-12">services</span><span class="hl-1">: </span><span class="hl-7">AuthService</span><br/><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">     </span><span class="hl-9">LOG</span><span class="hl-1"> [</span><span class="hl-7">GrpcRegistryService</span><span class="hl-1">] </span><span class="hl-7">Starting</span><span class="hl-1"> </span><span class="hl-7">gRPC</span><span class="hl-1"> </span><span class="hl-7">service</span><span class="hl-1"> </span><span class="hl-7">discovery</span><span class="hl-1">...</span><br/><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">     </span><span class="hl-9">LOG</span><span class="hl-1"> [</span><span class="hl-7">GrpcRegistryService</span><span class="hl-1">] </span><span class="hl-7">Registered</span><span class="hl-1"> </span><span class="hl-12">controller</span><span class="hl-1">: </span><span class="hl-7">AuthService</span><br/><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">   </span><span class="hl-9">DEBUG</span><span class="hl-1"> [</span><span class="hl-7">GrpcRegistryService</span><span class="hl-1">] </span><span class="hl-7">Found</span><span class="hl-1"> </span><span class="hl-7">gRPC</span><span class="hl-1"> </span><span class="hl-12">method</span><span class="hl-1">: </span><span class="hl-7">AuthController</span><span class="hl-1">.</span><span class="hl-7">login</span><br/><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">01</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">     </span><span class="hl-9">LOG</span><span class="hl-1"> [</span><span class="hl-7">GrpcClient</span><span class="hl-1">] </span><span class="hl-7">Created</span><span class="hl-1"> </span><span class="hl-7">gRPC</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> </span><span class="hl-7">for</span><span class="hl-1"> </span><span class="hl-12">service</span><span class="hl-1">: </span><span class="hl-7">AuthService</span><br/><span class="hl-1">[</span><span class="hl-7">Nest</span><span class="hl-1">] </span><span class="hl-10">12345</span><span class="hl-1">  - </span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">01</span><span class="hl-1">/</span><span class="hl-10">2025</span><span class="hl-1">, </span><span class="hl-10">10</span><span class="hl-1">:</span><span class="hl-10">00</span><span class="hl-1">:</span><span class="hl-10">01</span><span class="hl-1"> </span><span class="hl-9">AM</span><span class="hl-1">   </span><span class="hl-9">DEBUG</span><span class="hl-1"> [</span><span class="hl-7">GrpcClient</span><span class="hl-1">] </span><span class="hl-7">Calling</span><span class="hl-1"> </span><span class="hl-7">unary</span><span class="hl-1"> </span><span class="hl-12">method</span><span class="hl-1">: </span><span class="hl-7">AuthService</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1"> (</span><span class="hl-7">took</span><span class="hl-1"> 45</span><span class="hl-7">ms</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<a id="md:🔧-configuration-options" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🔧 Configuration Options<a href="#md:🔧-configuration-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:complete-configuration-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Complete Configuration Interface<a href="#md:complete-configuration-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">GrpcOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Required</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">; </span><span class="hl-3">// Path to proto file(s)</span><br/><span class="hl-1">    </span><span class="hl-7">package</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">; </span><span class="hl-3">// Proto package name</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Connection</span><br/><span class="hl-1">    </span><span class="hl-7">url</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">; </span><span class="hl-3">// gRPC server URL (default: &#39;localhost:50051&#39;)</span><br/><span class="hl-1">    </span><span class="hl-7">secure</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Use TLS (default: false)</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// TLS Configuration</span><br/><span class="hl-1">    </span><span class="hl-7">rootCerts</span><span class="hl-1">?: </span><span class="hl-8">Buffer</span><span class="hl-1">; </span><span class="hl-3">// Root certificates for TLS</span><br/><span class="hl-1">    </span><span class="hl-7">privateKey</span><span class="hl-1">?: </span><span class="hl-8">Buffer</span><span class="hl-1">; </span><span class="hl-3">// Private key for TLS</span><br/><span class="hl-1">    </span><span class="hl-7">certChain</span><span class="hl-1">?: </span><span class="hl-8">Buffer</span><span class="hl-1">; </span><span class="hl-3">// Certificate chain for TLS</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Message Limits</span><br/><span class="hl-1">    </span><span class="hl-7">maxSendMessageSize</span><span class="hl-1">?: </span><span class="hl-8">number</span><span class="hl-1">; </span><span class="hl-3">// Max send message size (default: 4MB)</span><br/><span class="hl-1">    </span><span class="hl-7">maxReceiveMessageSize</span><span class="hl-1">?: </span><span class="hl-8">number</span><span class="hl-1">; </span><span class="hl-3">// Max receive message size (default: 4MB)</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Proto Loader Options</span><br/><span class="hl-1">    </span><span class="hl-7">loaderOptions</span><span class="hl-1">?: {</span><br/><span class="hl-1">        </span><span class="hl-7">keepCase</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Keep field name case (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">longs</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1"> | </span><span class="hl-8">Function</span><span class="hl-1">; </span><span class="hl-3">// Long type conversion (default: String)</span><br/><span class="hl-1">        </span><span class="hl-7">enums</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">; </span><span class="hl-3">// Enum type conversion (default: String)</span><br/><span class="hl-1">        </span><span class="hl-7">defaults</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Include default values (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">oneofs</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Include oneof fields (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">arrays</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Use arrays for repeated fields (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">objects</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Use objects for map fields (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">includeDirs</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">[]; </span><span class="hl-3">// Include directories for proto files</span><br/><span class="hl-1">    };</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Logging</span><br/><span class="hl-1">    </span><span class="hl-7">logging</span><span class="hl-1">?: {</span><br/><span class="hl-1">        </span><span class="hl-7">enabled</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Enable/disable logging (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">level</span><span class="hl-1">?: </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;verbose&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;log&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;warn&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">; </span><span class="hl-3">// Log level (default: &#39;log&#39;)</span><br/><span class="hl-1">        </span><span class="hl-7">context</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">; </span><span class="hl-3">// Custom context (default: &#39;GrpcModule&#39;)</span><br/><span class="hl-1">        </span><span class="hl-7">logErrors</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Log errors (default: true)</span><br/><span class="hl-1">        </span><span class="hl-7">logPerformance</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Log performance metrics (default: false)</span><br/><span class="hl-1">        </span><span class="hl-7">logDetails</span><span class="hl-1">?: </span><span class="hl-8">boolean</span><span class="hl-1">; </span><span class="hl-3">// Log request/response details (default: false)</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:🎯-api-reference" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🎯 API Reference<a href="#md:🎯-api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:core-classes-and-decorators" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Core Classes and Decorators<a href="#md:core-classes-and-decorators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:decorators" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Decorators<a href="#md:decorators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Controller decorator - marks a class as gRPC controller</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcController</span><span class="hl-1">(</span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">GrpcControllerOptions</span><span class="hl-1">)</span><br/><br/><span class="hl-3">// Method decorator - marks a method as gRPC handler</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcMethod</span><span class="hl-1">(</span><span class="hl-7">methodName</span><span class="hl-1">?: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">GrpcMethodOptions</span><span class="hl-1">)</span><br/><br/><span class="hl-3">// Stream decorator - marks a method as gRPC streaming handler</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcStream</span><span class="hl-1">(</span><span class="hl-7">methodName</span><span class="hl-1">?: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">GrpcMethodOptions</span><span class="hl-1">)</span><br/><br/><span class="hl-3">// Service decorator - marks a class as gRPC service client</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcService</span><span class="hl-1">(</span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">GrpcServiceOptions</span><span class="hl-1">)</span><br/><br/><span class="hl-3">// Injection decorator - injects gRPC client</span><br/><span class="hl-1">@</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">)</span><br/><br/><span class="hl-3">// Payload decorators - extract request data</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcPayload</span><span class="hl-1">()</span><br/><span class="hl-1">@</span><span class="hl-0">GrpcStreamPayload</span><span class="hl-1">()</span>
</code><button type="button">Copy</button></pre>

<a id="md:modules" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Modules<a href="#md:modules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Root module configuration</span><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">(</span><span class="hl-7">options</span><span class="hl-1">: </span><span class="hl-7">GrpcOptions</span><span class="hl-1">): </span><span class="hl-7">DynamicModule</span><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRootAsync</span><span class="hl-1">(</span><span class="hl-7">options</span><span class="hl-1">: </span><span class="hl-7">GrpcAsyncOptions</span><span class="hl-1">): </span><span class="hl-7">DynamicModule</span><br/><br/><span class="hl-3">// Feature module configuration</span><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">(</span><span class="hl-7">options</span><span class="hl-1">: </span><span class="hl-7">GrpcFeatureOptions</span><span class="hl-1">): </span><span class="hl-7">DynamicModule</span>
</code><button type="button">Copy</button></pre>

<a id="md:services" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Services<a href="#md:services" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// gRPC Client Service</span><br/><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">GrpcClientService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Unary call</span><br/><span class="hl-1">    </span><span class="hl-0">call</span><span class="hl-1">&lt;</span><span class="hl-8">TRequest</span><span class="hl-1">, </span><span class="hl-8">TResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">        </span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">methodName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">TRequest</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">options</span><span class="hl-1">?: </span><span class="hl-8">GrpcClientOptions</span><span class="hl-1">,</span><br/><span class="hl-1">    ): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">TResponse</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Server streaming</span><br/><span class="hl-1">    </span><span class="hl-0">serverStream</span><span class="hl-1">&lt;</span><span class="hl-8">TRequest</span><span class="hl-1">, </span><span class="hl-8">TResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">        </span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">methodName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">TRequest</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">options</span><span class="hl-1">?: </span><span class="hl-8">GrpcClientOptions</span><span class="hl-1">,</span><br/><span class="hl-1">    ): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">TResponse</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Client streaming</span><br/><span class="hl-1">    </span><span class="hl-0">clientStream</span><span class="hl-1">&lt;</span><span class="hl-8">TRequest</span><span class="hl-1">, </span><span class="hl-8">TResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">        </span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">methodName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">TRequest</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">        </span><span class="hl-7">options</span><span class="hl-1">?: </span><span class="hl-8">GrpcClientOptions</span><span class="hl-1">,</span><br/><span class="hl-1">    ): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">TResponse</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Bidirectional streaming</span><br/><span class="hl-1">    </span><span class="hl-0">bidiStream</span><span class="hl-1">&lt;</span><span class="hl-8">TRequest</span><span class="hl-1">, </span><span class="hl-8">TResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">        </span><span class="hl-7">serviceName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">methodName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">TRequest</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">        </span><span class="hl-7">options</span><span class="hl-1">?: </span><span class="hl-8">GrpcClientOptions</span><span class="hl-1">,</span><br/><span class="hl-1">    ): </span><span class="hl-8">Observable</span><span class="hl-1">&lt;</span><span class="hl-8">TResponse</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:exception-classes" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Exception Classes<a href="#md:exception-classes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Main exception class</span><br/><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">GrpcException</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">RpcException</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><span class="hl-7">options</span><span class="hl-1">: </span><span class="hl-8">GrpcExceptionOptions</span><span class="hl-1"> | </span><span class="hl-8">string</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Static factory methods for all gRPC status codes</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">ok</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">cancelled</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">unknown</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">invalidArgument</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">deadlineExceeded</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">notFound</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">alreadyExists</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">permissionDenied</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">resourceExhausted</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">failedPrecondition</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">aborted</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">outOfRange</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">unimplemented</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">internal</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">unavailable</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">dataLoss</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-0">unauthenticated</span><span class="hl-1">(</span><span class="hl-7">message</span><span class="hl-1">?: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-7">details</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-7">metadata</span><span class="hl-1">?: </span><span class="hl-8">any</span><span class="hl-1">): </span><span class="hl-8">GrpcException</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:error-codes" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Error Codes<a href="#md:error-codes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">enum</span><span class="hl-1"> </span><span class="hl-8">GrpcErrorCode</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">OK</span><span class="hl-1"> = </span><span class="hl-10">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">CANCELLED</span><span class="hl-1"> = </span><span class="hl-10">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">UNKNOWN</span><span class="hl-1"> = </span><span class="hl-10">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">INVALID_ARGUMENT</span><span class="hl-1"> = </span><span class="hl-10">3</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">DEADLINE_EXCEEDED</span><span class="hl-1"> = </span><span class="hl-10">4</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">NOT_FOUND</span><span class="hl-1"> = </span><span class="hl-10">5</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">ALREADY_EXISTS</span><span class="hl-1"> = </span><span class="hl-10">6</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">PERMISSION_DENIED</span><span class="hl-1"> = </span><span class="hl-10">7</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">RESOURCE_EXHAUSTED</span><span class="hl-1"> = </span><span class="hl-10">8</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">FAILED_PRECONDITION</span><span class="hl-1"> = </span><span class="hl-10">9</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">ABORTED</span><span class="hl-1"> = </span><span class="hl-10">10</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">OUT_OF_RANGE</span><span class="hl-1"> = </span><span class="hl-10">11</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">UNIMPLEMENTED</span><span class="hl-1"> = </span><span class="hl-10">12</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">INTERNAL</span><span class="hl-1"> = </span><span class="hl-10">13</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">UNAVAILABLE</span><span class="hl-1"> = </span><span class="hl-10">14</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">DATA_LOSS</span><span class="hl-1"> = </span><span class="hl-10">15</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">UNAUTHENTICATED</span><span class="hl-1"> = </span><span class="hl-10">16</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:🚀-performance-tips" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🚀 Performance Tips<a href="#md:🚀-performance-tips" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:connection-pooling" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Connection Pooling<a href="#md:connection-pooling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">// Optimize message sizes</span><br/><span class="hl-1">    </span><span class="hl-7">maxSendMessageSize:</span><span class="hl-1"> </span><span class="hl-10">16</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1">, </span><span class="hl-3">// 16MB</span><br/><span class="hl-1">    </span><span class="hl-7">maxReceiveMessageSize:</span><span class="hl-1"> </span><span class="hl-10">16</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1">, </span><span class="hl-3">// 16MB</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:client-side-caching" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Client-Side Caching<a href="#md:client-side-caching" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">@</span><span class="hl-0">Injectable</span><span class="hl-1">()</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">CachedUserClientService</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-7">cache</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">&lt;</span><span class="hl-8">string</span><span class="hl-1">, { </span><span class="hl-7">data</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">; </span><span class="hl-7">expiry</span><span class="hl-1">: </span><span class="hl-8">number</span><span class="hl-1"> }&gt;();</span><br/><span class="hl-1">    </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">CACHE_TTL</span><span class="hl-1"> = </span><span class="hl-10">5</span><span class="hl-1"> * </span><span class="hl-10">60</span><span class="hl-1"> * </span><span class="hl-10">1000</span><span class="hl-1">; </span><span class="hl-3">// 5 minutes</span><br/><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">        @</span><span class="hl-0">InjectGrpcClient</span><span class="hl-1">(</span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-7">userClient</span><span class="hl-1">: </span><span class="hl-8">GrpcClientService</span><span class="hl-1">,</span><br/><span class="hl-1">    ) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">getUser</span><span class="hl-1">(</span><span class="hl-7">id</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">User</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">cached</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">cache</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-7">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">cached</span><span class="hl-1"> &amp;&amp; </span><span class="hl-7">cached</span><span class="hl-1">.</span><span class="hl-7">expiry</span><span class="hl-1"> &gt; </span><span class="hl-7">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">()) {</span><br/><span class="hl-1">            </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-7">cached</span><span class="hl-1">.</span><span class="hl-7">data</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">userClient</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">&lt;</span><span class="hl-8">GetUserRequest</span><span class="hl-1">, </span><span class="hl-8">GetUserResponse</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">&#39;GetUser&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            { </span><span class="hl-7">id</span><span class="hl-1"> },</span><br/><span class="hl-1">        );</span><br/><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-7">cache</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-7">id</span><span class="hl-1">, {</span><br/><span class="hl-1">            </span><span class="hl-7">data:</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">expiry:</span><span class="hl-1"> </span><span class="hl-7">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">() + </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-9">CACHE_TTL</span><span class="hl-1">,</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:🔧-troubleshooting" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🔧 Troubleshooting<a href="#md:🔧-troubleshooting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:common-issues" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Common Issues<a href="#md:common-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:proto-file-loading-issues" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Proto File Loading Issues<a href="#md:proto-file-loading-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Issue: Proto file not found</span><br/><span class="hl-3">// Solution: Use absolute paths or proper relative paths</span><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-7">path</span><span class="hl-1">.</span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/service.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Issue: Package not found</span><br/><span class="hl-3">// Solution: Ensure package name matches proto file</span><br/><span class="hl-3">// In service.proto: package com.example.service;</span><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.example.service&#39;</span><span class="hl-1">, </span><span class="hl-3">// Must match proto file</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:connection-issues" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Connection Issues<a href="#md:connection-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Issue: Connection refused</span><br/><span class="hl-3">// Solution: Check server URL and ensure server is running</span><br/><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">, </span><span class="hl-3">// Ensure server is running on this port</span><br/><span class="hl-1">    </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1">, </span><span class="hl-3">// Enable debug logging to see connection details</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:type-generation-issues" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Type Generation Issues<a href="#md:type-generation-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="bash"><span class="hl-3"># Issue: Generated types are not up to date</span><br/><span class="hl-3"># Solution: Regenerate types when proto files change</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><span class="hl-1"> </span><span class="hl-2">generate</span><span class="hl-1"> </span><span class="hl-4">--proto</span><span class="hl-1"> </span><span class="hl-2">&quot;./protos/**/*.proto&quot;</span><span class="hl-1"> </span><span class="hl-4">--output</span><span class="hl-1"> </span><span class="hl-2">&quot;./src/generated&quot;</span><br/><br/><span class="hl-3"># Issue: Import paths are incorrect</span><br/><span class="hl-3"># Solution: Use absolute imports or configure path mapping in tsconfig.json</span><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-0">&quot;compilerOptions&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">{</span><br/><span class="hl-1">    </span><span class="hl-0">&quot;paths&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">{</span><br/><span class="hl-1">      </span><span class="hl-0">&quot;@generated/*&quot;</span><span class="hl-0">:</span><span class="hl-1"> [</span><span class="hl-2">&quot;./src/generated/*&quot;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:debug-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Debug Mode<a href="#md:debug-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Enable comprehensive debugging:</p>
<pre><code class="typescript"><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forRoot</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/service.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;service&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;localhost:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">logging:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">level:</span><span class="hl-1"> </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">logErrors:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">logPerformance:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">logDetails:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:🔧-fixing-common-issues" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🔧 Fixing Common Issues<a href="#md:🔧-fixing-common-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:service-registration-error-fix" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Service Registration Error Fix<a href="#md:service-registration-error-fix" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you encounter the error <code>Nest can't resolve dependencies of the GrpcAuthService (ConfigService, ?). Please make sure that the argument &quot;GRPC_CLIENT_AuthService&quot; at index [1] is available</code>, here's how to fix it using the new service registration pattern:</p>
<a id="md:before-problematic" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Before (Problematic)<a href="#md:before-problematic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// This will cause injection errors</span><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">GrpcAuthModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<a id="md:after-fixed" class="tsd-anchor"></a><h4 class="tsd-anchor-link">After (Fixed)<a href="#md:after-fixed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-7">join</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;path&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-3">// Use forFeature to register external services this module calls</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">serviceRegistrations:</span><span class="hl-1"> [</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;../protos/auth.proto&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">AUTH_SERVICE_URL</span><span class="hl-1"> || </span><span class="hl-2">&#39;auth-service:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">options:</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-7">timeout:</span><span class="hl-1"> </span><span class="hl-10">10000</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-7">maxRetries:</span><span class="hl-1"> </span><span class="hl-10">3</span><span class="hl-1">,</span><br/><span class="hl-1">                    },</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><br/><span class="hl-1">            </span><span class="hl-3">// Register your custom service that uses the AuthService client</span><br/><span class="hl-1">            </span><span class="hl-7">services:</span><span class="hl-1"> [</span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-7">providers:</span><span class="hl-1"> [</span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-7">exports:</span><span class="hl-1"> [</span><span class="hl-7">GrpcAuthService</span><span class="hl-1">],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">GrpcAuthModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<p>The key difference is that <code>externalServices</code> automatically creates the <code>GRPC_CLIENT_AuthService</code> provider that can be injected with <code>@InjectGrpcClient('AuthService')</code>.</p>
<a id="md:service-discovery-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Service Discovery Pattern<a href="#md:service-discovery-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The enhanced <code>forFeature()</code> method enables a clean service discovery pattern:</p>
<pre><code class="typescript"><span class="hl-3">// Each microservice module registers its external dependencies</span><br/><span class="hl-1">@</span><span class="hl-0">Module</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">imports:</span><span class="hl-1"> [</span><br/><span class="hl-1">        </span><span class="hl-7">GrpcModule</span><span class="hl-1">.</span><span class="hl-0">forFeature</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-7">controllers:</span><span class="hl-1"> [</span><span class="hl-7">PostController</span><span class="hl-1">], </span><span class="hl-3">// This service&#39;s controllers</span><br/><br/><span class="hl-1">            </span><span class="hl-7">externalServices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                </span><span class="hl-3">// Services this module depends on</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;AuthService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/auth.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;auth:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;UserService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/user.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;user:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-7">serviceName:</span><span class="hl-1"> </span><span class="hl-2">&#39;NotificationService&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">package:</span><span class="hl-1"> </span><span class="hl-2">&#39;notification&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">protoPath:</span><span class="hl-1"> </span><span class="hl-2">&#39;./protos/notification.proto&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;notification:50051&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">            ],</span><br/><br/><span class="hl-1">            </span><span class="hl-7">services:</span><span class="hl-1"> [</span><span class="hl-7">PostClientService</span><span class="hl-1">], </span><span class="hl-3">// Custom client services</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">PostModule</span><span class="hl-1"> {}</span>
</code><button type="button">Copy</button></pre>

<p>This pattern provides:</p>
<ul>
<li>✅ <strong>Automatic client injection</strong> - No manual provider setup needed</li>
<li>✅ <strong>Clear service dependencies</strong> - External services are explicitly declared</li>
<li>✅ <strong>Environment configuration</strong> - URLs and options can be configured per environment</li>
<li>✅ <strong>Type safety</strong> - Full TypeScript support with generated types</li>
<li>✅ <strong>Modular organization</strong> - Each feature module manages its own dependencies</li>
</ul>
<a id="md:🤝-contributing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🤝 Contributing<a href="#md:🤝-contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We welcome contributions! Please see our <a href="CONTRIBUTING.md">Contributing Guide</a> for details.</p>
<a id="md:development-setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Development Setup<a href="#md:development-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">https://github.com/hmake98/nestjs-grpc.git</span><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">nestjs-grpc</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<a id="md:running-tests" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Running Tests<a href="#md:running-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-3"># Run all tests</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span><br/><br/><span class="hl-3"># Run tests in watch mode</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test:watch</span><br/><br/><span class="hl-3"># Run tests with coverage</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test:coverage</span><br/><br/><span class="hl-3"># Run specific test file</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span><span class="hl-1"> </span><span class="hl-4">--</span><span class="hl-1"> </span><span class="hl-2">auth.controller.spec.ts</span>
</code><button type="button">Copy</button></pre>

<a id="md:building-documentation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Building Documentation<a href="#md:building-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-3"># Generate API documentation</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">docs</span><br/><br/><span class="hl-3"># Serve documentation locally</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">docs:serve</span>
</code><button type="button">Copy</button></pre>

<a id="md:📄-license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">📄 License<a href="#md:📄-license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT License - see <a href="media/LICENSE">LICENSE</a> file for details.</p>
<a id="md:🔗-links" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🔗 Links<a href="#md:🔗-links" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://github.com/hmake98/nestjs-grpc" target="_blank" class="external">GitHub Repository</a></li>
<li><a href="https://www.npmjs.com/package/nestjs-grpc" target="_blank" class="external">npm Package</a></li>
<li><a href="https://hmake98.github.io/nestjs-grpc/" target="_blank" class="external">API Documentation</a></li>
<li><a href="https://grpc.io/docs/" target="_blank" class="external">gRPC Official Documentation</a></li>
<li><a href="https://docs.nestjs.com/" target="_blank" class="external">NestJS Documentation</a></li>
<li><a href="https://developers.google.com/protocol-buffers" target="_blank" class="external">Protocol Buffers Guide</a></li>
</ul>
<a id="md:🆘-support" class="tsd-anchor"></a><h2 class="tsd-anchor-link">🆘 Support<a href="#md:🆘-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://github.com/hmake98/nestjs-grpc/issues" target="_blank" class="external">GitHub Issues</a> - Bug reports and feature requests</li>
<li><a href="https://github.com/hmake98/nestjs-grpc/discussions" target="_blank" class="external">GitHub Discussions</a> - Community support and questions</li>
<li><a href="https://stackoverflow.com/questions/tagged/nestjs-grpc" target="_blank" class="external">Stack Overflow</a> - Technical questions</li>
</ul>
<hr>
<p><strong>Made with ❤️ for the NestJS community</strong></p>
<p>⭐ Star us on GitHub if this package helped you!</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:nestjs-grpc"><span>nestjs-<wbr/>grpc</span></a><ul><li><a href="#md:✨-features"><span>✨ <wbr/>Features</span></a></li><li><a href="#md:🚀-quick-start"><span>🚀 <wbr/>Quick <wbr/>Start</span></a></li><li><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:1-create-proto-file"><span>1. <wbr/>Create <wbr/>Proto <wbr/>File</span></a></li><li><a href="#md:2-generate-typescript-types"><span>2. <wbr/>Generate <wbr/>Type<wbr/>Script <wbr/>Types</span></a></li><li><a href="#md:3-set-up-grpc-module"><span>3. <wbr/>Set <wbr/>Up gRPC <wbr/>Module</span></a></li><li><a href="#md:4-create-grpc-controller"><span>4. <wbr/>Create gRPC <wbr/>Controller</span></a></li><li><a href="#md:5-create-grpc-client"><span>5. <wbr/>Create gRPC <wbr/>Client</span></a></li></ul></li><li><a href="#md:📖-documentation"><span>📖 <wbr/>Documentation</span></a></li><li><ul><li><a href="#md:cli-code-generation"><span>CLI <wbr/>Code <wbr/>Generation</span></a></li><li><ul><li><a href="#md:basic-usage"><span>Basic <wbr/>Usage</span></a></li><li><a href="#md:cli-options"><span>CLI <wbr/>Options</span></a></li><li><a href="#md:generated-code-structure"><span>Generated <wbr/>Code <wbr/>Structure</span></a></li></ul></li><li><a href="#md:module-configuration"><span>Module <wbr/>Configuration</span></a></li><li><ul><li><a href="#md:basic-configuration"><span>Basic <wbr/>Configuration</span></a></li><li><a href="#md:async-configuration-with-configservice"><span>Async <wbr/>Configuration with <wbr/>Config<wbr/>Service</span></a></li><li><a href="#md:tlsssl-configuration"><span>TLS/SSL <wbr/>Configuration</span></a></li></ul></li><li><a href="#md:feature-modules-and-service-registration"><span>Feature <wbr/>Modules and <wbr/>Service <wbr/>Registration</span></a></li><li><ul><li><a href="#md:basic-feature-module"><span>Basic <wbr/>Feature <wbr/>Module</span></a></li><li><a href="#md:auth-service-service-provider"><span>Auth <wbr/>Service (<wbr/>Service <wbr/>Provider)</span></a></li><li><a href="#md:post-service-service-consumer"><span>Post <wbr/>Service (<wbr/>Service <wbr/>Consumer)</span></a></li><li><a href="#md:production-configuration-example"><span>Production <wbr/>Configuration <wbr/>Example</span></a></li><li><a href="#md:complete-microservices-example"><span>Complete <wbr/>Microservices <wbr/>Example</span></a></li><li><a href="#md:environment-based-service-configuration"><span>Environment-<wbr/>Based <wbr/>Service <wbr/>Configuration</span></a></li></ul></li></ul></li><li><a href="#md:🔄-streaming-examples"><span>🔄 <wbr/>Streaming <wbr/>Examples</span></a></li><li><ul><li><a href="#md:server-streaming"><span>Server <wbr/>Streaming</span></a></li><li><a href="#md:client-streaming"><span>Client <wbr/>Streaming</span></a></li><li><a href="#md:bidirectional-streaming"><span>Bidirectional <wbr/>Streaming</span></a></li></ul></li><li><a href="#md:🛡️-error-handling"><span>🛡️ <wbr/>Error <wbr/>Handling</span></a></li><li><ul><li><a href="#md:using-grpcexception"><span>Using <wbr/>Grpc<wbr/>Exception</span></a></li></ul></li><li><a href="#md:🧪-testing"><span>🧪 <wbr/>Testing</span></a></li><li><ul><li><a href="#md:testing-grpc-controllers"><span>Testing gRPC <wbr/>Controllers</span></a></li><li><a href="#md:testing-grpc-clients"><span>Testing gRPC <wbr/>Clients</span></a></li></ul></li><li><a href="#md:🏗️-microservices-architecture-examples"><span>🏗️ <wbr/>Microservices <wbr/>Architecture <wbr/>Examples</span></a></li><li><ul><li><a href="#md:api-gateway-with-grpc-backends"><span>API <wbr/>Gateway with gRPC <wbr/>Backends</span></a></li><li><a href="#md:microservice-implementation"><span>Microservice <wbr/>Implementation</span></a></li></ul></li><li><a href="#md:📊-logging-configuration"><span>📊 <wbr/>Logging <wbr/>Configuration</span></a></li><li><ul><li><a href="#md:basic-logging-setup"><span>Basic <wbr/>Logging <wbr/>Setup</span></a></li><li><a href="#md:environment-based-logging"><span>Environment-<wbr/>Based <wbr/>Logging</span></a></li><li><a href="#md:sample-log-output"><span>Sample <wbr/>Log <wbr/>Output</span></a></li></ul></li><li><a href="#md:🔧-configuration-options"><span>🔧 <wbr/>Configuration <wbr/>Options</span></a></li><li><ul><li><a href="#md:complete-configuration-interface"><span>Complete <wbr/>Configuration <wbr/>Interface</span></a></li></ul></li><li><a href="#md:🎯-api-reference"><span>🎯 API <wbr/>Reference</span></a></li><li><ul><li><a href="#md:core-classes-and-decorators"><span>Core <wbr/>Classes and <wbr/>Decorators</span></a></li><li><ul><li><a href="#md:decorators"><span>Decorators</span></a></li><li><a href="#md:modules"><span>Modules</span></a></li><li><a href="#md:services"><span>Services</span></a></li><li><a href="#md:exception-classes"><span>Exception <wbr/>Classes</span></a></li><li><a href="#md:error-codes"><span>Error <wbr/>Codes</span></a></li></ul></li></ul></li><li><a href="#md:🚀-performance-tips"><span>🚀 <wbr/>Performance <wbr/>Tips</span></a></li><li><ul><li><a href="#md:connection-pooling"><span>Connection <wbr/>Pooling</span></a></li><li><a href="#md:client-side-caching"><span>Client-<wbr/>Side <wbr/>Caching</span></a></li></ul></li><li><a href="#md:🔧-troubleshooting"><span>🔧 <wbr/>Troubleshooting</span></a></li><li><ul><li><a href="#md:common-issues"><span>Common <wbr/>Issues</span></a></li><li><ul><li><a href="#md:proto-file-loading-issues"><span>Proto <wbr/>File <wbr/>Loading <wbr/>Issues</span></a></li><li><a href="#md:connection-issues"><span>Connection <wbr/>Issues</span></a></li><li><a href="#md:type-generation-issues"><span>Type <wbr/>Generation <wbr/>Issues</span></a></li></ul></li><li><a href="#md:debug-mode"><span>Debug <wbr/>Mode</span></a></li></ul></li><li><a href="#md:🔧-fixing-common-issues"><span>🔧 <wbr/>Fixing <wbr/>Common <wbr/>Issues</span></a></li><li><ul><li><a href="#md:service-registration-error-fix"><span>Service <wbr/>Registration <wbr/>Error <wbr/>Fix</span></a></li><li><ul><li><a href="#md:before-problematic"><span>Before (<wbr/>Problematic)</span></a></li><li><a href="#md:after-fixed"><span>After (<wbr/>Fixed)</span></a></li></ul></li><li><a href="#md:service-discovery-pattern"><span>Service <wbr/>Discovery <wbr/>Pattern</span></a></li></ul></li><li><a href="#md:🤝-contributing"><span>🤝 <wbr/>Contributing</span></a></li><li><ul><li><a href="#md:development-setup"><span>Development <wbr/>Setup</span></a></li><li><a href="#md:running-tests"><span>Running <wbr/>Tests</span></a></li><li><a href="#md:building-documentation"><span>Building <wbr/>Documentation</span></a></li></ul></li><li><a href="#md:📄-license"><span>📄 <wbr/>License</span></a></li><li><a href="#md:🔗-links"><span>🔗 <wbr/>Links</span></a></li><li><a href="#md:🆘-support"><span>🆘 <wbr/>Support</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>nestjs-grpc</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
