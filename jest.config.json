{
    "testEnvironment": "node",
    "testMatch": ["**/__tests__/**/*.test.ts", "**/?(*.)+(spec|test).ts"],
    "collectCoverageFrom": ["src/**/*.ts", "!src/**/*.d.ts", "!src/cli/cli.ts", "!**/index.ts"],
    "coverageThreshold": {
        "global": {
            "statements": 98,
            "branches": 98,
            "functions": 98,
            "lines": 98
        }
    },
    "coverageDirectory": "coverage",
    "coverageReporters": ["text", "lcov", "html"],
    "moduleFileExtensions": ["ts", "js", "json"],
    "transform": {
        "^.+\\.ts$": ["@swc/jest", {
            "jsc": {
                "parser": {
                    "syntax": "typescript",
                    "decorators": true,
                    "dynamicImport": true
                },
                "transform": {
                    "decoratorMetadata": true,
                    "legacyDecorator": true
                },
                "target": "es2020",
                "externalHelpers": false
            }
        }]
    },
    "moduleNameMapper": {
        "^@grpc/grpc-js$": "<rootDir>/test/__mocks__/@grpc/grpc-js.js",
        "^protobufjs$": "<rootDir>/test/__mocks__/protobufjs.js"
    },
    "testPathIgnorePatterns": ["/node_modules/", "/dist/", "src/cli/cli.ts"],
    "setupFilesAfterEnv": ["<rootDir>/test/setup.ts"],
    "testTimeout": 10000,
    "maxWorkers": 1,
    "forceExit": true,
    "detectOpenHandles": true,
    "clearMocks": true,
    "restoreMocks": true,
    "resetMocks": false,
    "verbose": true,
    "bail": false,
    "maxConcurrency": 1
}
